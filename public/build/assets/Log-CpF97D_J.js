import{j as s,r as c,a as T}from"./app-DTvIVVnx.js";import{T as w,e as C,g as D,i as v,L}from"./Layout-iDNUZsXC.js";import{C as S,B as y}from"./index-DKc-WUgt.js";import{A as P,L as i}from"./AlertComponent-Bp8pgkV8.js";import{T as k,a as _,b as p,c as l,d as A,e as r,P as O,D as B,f as E,g as H,h as q,i as I,j as J}from"./drawer-DiNruSG4.js";import"./DialogComponent-CUGPmDTn.js";import"./index-D0Bxsnbg.js";function R({text:t}){return s.jsx(w,{children:s.jsxs(C,{children:[s.jsx(D,{asChild:!0,children:s.jsx("span",{className:"block max-w-[200px] truncate cursor-pointer",children:t})}),s.jsx(v,{children:s.jsx("p",{className:"max-w-xs break-words",children:t})})]})})}const V=({user:t,message:m})=>{const[j,d]=c.useState(!1),[o,g]=c.useState(null),[a,u]=c.useState(null),[N,x]=c.useState(!1),h=async(e=1)=>{d(!0);try{const b=await(await T.get(route("log.ajax",{page:e}))).data;g(b),d(!1)}catch(n){console.log(n),d(!1)}};c.useEffect(()=>{h()},[]);const f=e=>{u(e),x(!0)};return s.jsx(L,{pageTitle:"log aktivitas",children:s.jsxs("div",{className:"mx-auto w-full",children:[s.jsxs(S,{children:[m&&s.jsx(P,{title:"Sukses",description:m}),j?s.jsx("h4",{className:"mx-auto py-8 text-center",children:"Loading..."}):s.jsxs(k,{children:[s.jsx(_,{children:s.jsxs(p,{children:[s.jsx(l,{children:"ID"}),s.jsx(l,{children:"User"}),s.jsx(l,{children:"Page"}),s.jsx(l,{children:"Action"}),s.jsx(l,{children:"Log"}),s.jsx(l,{children:"Time"})]})}),s.jsx(A,{children:o&&o.data.map((e,n)=>s.jsxs(p,{className:"cursor-pointer",onClick:()=>f(e),children:[s.jsx(r,{className:"font-medium",children:e.id}),s.jsx(r,{className:"font-medium",children:e.causer_id}),s.jsx(r,{children:e.log_name}),s.jsx(r,{children:e.description}),s.jsx(r,{children:s.jsx(R,{text:JSON.stringify(e.properties)})}),s.jsx(r,{children:e.created_string})]},n))})]})]}),s.jsx(O,{data:o,onPageChange:e=>h(e)}),s.jsx(B,{open:N,onOpenChange:x,children:s.jsxs(E,{className:"h-[80vh]",children:[s.jsxs(H,{className:"text-left",children:[s.jsx(q,{children:"Detail Log"}),a&&s.jsxs("div",{className:"w-full overflow-y-scroll h-[340px] md:h-[80vh] mt-8",children:[s.jsxs("div",{className:"grid gap-4 grid-cols-12 mb-4",children:[s.jsx(i,{className:"col-span-12 md:col-span-3 items-center flex -mb-3 md:mb-0",children:"ID"}),s.jsx("div",{className:"col-span-12 md:col-span-9",children:a.id})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-12 mb-4",children:[s.jsx(i,{className:"col-span-12 md:col-span-3 items-center flex -mb-3 md:mb-0",children:"Page"}),s.jsx("div",{className:"col-span-12 md:col-span-9",children:a.log_name})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-12 mb-4",children:[s.jsx(i,{className:"col-span-12 md:col-span-3 items-center flex -mb-3 md:mb-0",children:"Action"}),s.jsx("div",{className:"col-span-12 md:col-span-9",children:a.description})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-12 mb-4",children:[s.jsx(i,{className:"col-span-12 md:col-span-3 items-center flex -mb-3 md:mb-0",children:"Log"}),s.jsx("div",{className:"col-span-12 md:col-span-9",children:s.jsx("pre",{children:JSON.stringify(a.properties,null,2)})})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-12 mb-4",children:[s.jsx(i,{className:"col-span-12 md:col-span-3 items-center flex -mb-3 md:mb-0",children:"Time"}),s.jsx("div",{className:"col-span-12 md:col-span-9",children:a.created_string})]})]})]}),s.jsx(I,{className:"pt-2",children:s.jsx(J,{asChild:!0,children:s.jsx(y,{variant:"outline",children:"Tutup"})})})]})})]})})};export{V as default};
